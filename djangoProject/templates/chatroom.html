{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static style.css %}">
    <title>Hashed Chats | Chat Room</title>
</head>
<body>

<script type="text/javascript">
    $(document).remove(function() {
        $.ajax({
            type: 'GET',
            url: '/getmessages/{{ room }}/'

            $('#display').empty();
            for (let key in response.messages) {
                let temp = "<div class='container'><b>response.messages[key]</b>"
                $('#display').append(temp)
            },

        })
    })
</script>
<div class="container">
    <h1>{{ room }}</h1>
    <form class="forms">
        {% csrf_token %}
        <input type="hidden" name="username" id="username" value="{{ username }}">
        <input type="hidden" name="room_id" id="room_id" value="{{ room_details.id }}">
        <input type="text" name="message" id="message" value="message">
        <input type="submit" value="Send">

    </form>
</div>

<script type="text/javascript">
    $(document).on('submit', '#post-form', function (e) {
        e.preventDefault();

        $.ajax({
            type : 'POST',
            url : '/send',
            data: {
                room: $('#room'),
                username: $('#username').val(),
                room_id: $('#room_id').val(),
                message: $('#message').val(),
                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
            },
            success: function(data) {

            }
        });
        document.getElementById('message').value = ''
    })
</script>
</body>
</html>